% Copyright (C) 2014-2020 Miquel Sabaté Solà <mikisabate@gmail.com>
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.

\documentclass[11pt,a4paper,twoside,openright]{book}

%%
% Packages

\usepackage[a4paper,width=150mm,top=45mm,bottom=45mm]{geometry}
\usepackage{indentfirst}
\usepackage{makeidx}
\usepackage[pdftex]{graphicx}
\usepackage{wrapfig}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{url}
\usepackage{hyperref}
\usepackage{eurosym}
\usepackage{fancyhdr}
\usepackage{changepage}
\usepackage{float}
\usepackage{setspace}
\usepackage[titletoc]{appendix}
\usepackage[printonlyused,withpage]{acronym}

% Header and footer.
\newcommand {\fncyfront}{%
\fancyhead[RO] {{\footnotesize \rightmark}}
\fancyfoot[RO] {\thepage}
\fancyhead[LE] {\footnotesize {\leftmark}}
\fancyfoot[LE] {\thepage}
\fancyhead[RE,LO]{}
\fancyfoot[C]{}
\renewcommand{\headrulewidth}{0.3 pt}}
\newcommand {\fncymain }{%
\fancyhead[RO]{{\footnotesize \rightmark}}
\fancyfoot[RO]{\thepage}
\fancyhead[LE]{{\footnotesize \leftmark}}
\fancyfoot[LE]{\thepage}
\fancyfoot[C]{}
\renewcommand {\headrulewidth}{0.3 pt}}

% Don't apply the fancy style on blank pages from the openright option.
\makeatletter
\def \cleardoublepage {\clearpage \if@twoside
\ifodd\c@page
\else\hbox{}\thispagestyle{empty}\newpage
\if@twocolumn \hbox {}\newpage \fi \fi \fi }
\makeatother


%%
% New commands.

% Add an extra vertical space.
\newcommand{\espai}{\par\vspace{5mm}}

% How I do lists.
\newcommand{\mylist}{

\begin{itemize}
\setlength{\itemsep}{1pt}
\setlength{\parskip}{0pt}
\setlength{\parsep}{0pt}}
\newcommand{\mylistend}{\end{itemize}}

% Needed for the title.
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

% So the links in the Table of Contents actually work.
\hypersetup{
  colorlinks,
  citecolor=black,
  filecolor=black,
  linkcolor=black,
  urlcolor=black
}


%%
% Hey! Ho! Let's go!


\begin{document}


% The front matter is basically: the title, the ToC and the Preface.
\pagestyle{fancy}
\fncyfront
\frontmatter

\input{./title.tex}
\doublespacing
\tableofcontents
\singlespacing

\setlength{\parskip}{\baselineskip}

\cleardoublepage
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

\input{preface}

% Here starts the main matter.
\fncymain
\mainmatter

% All the elements of the project definition.
\input{project/project}

% An overview.
\input{overview/overview}

% The implementation of the project (a.k.a. the real deal).
\input{implementation/implementation}

% The cluster.
\input{hardware/hard}

% Section where I talk about what I needed to do in order to complete my
% thesis. Nothing too fancy...
\input{development/development}

% Social and environmental impact.
\input{development/impact}

% The conclusions of the whole thingie :D
\input{conclusions}

% Appendix
\begin{appendices}
\appendixpage
\noappendicestocpagenum
\addappheadtotoc
\input{appendix}
\end{appendices}

\backmatter

% Let there be a bibliography.
\cleardoublepage
\bibliographystyle{plain}
\refstepcounter{chapter}
\addcontentsline{toc}{chapter}{\bibname}
\bibliography{report}

% List of acronyms.
\input{acronyms}

\end{document}
